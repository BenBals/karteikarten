var x;x=function(e){var t;return t={},t.selector=e,t.element=function(){return document.querySelector(t.selector)},t.elements=function(){return document.querySelectorAll(t.selector)},t.e=t.element,t.es=t.elements,t.addClass=function(e,n){var o,i,s,r,a;if(void 0===n)for(i=t.elements(),r=0,a=i.length;a>r;r++)s=i[r],s.className===s.className.split(e).join("")&&(""===s.className?s.className=e:s.className+=" "+e);else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.addClass. The selector was "+t.selector),null;o=t.elements()[n],""===o.className?o.className=e:o.className+=" "+e}return this},t.append=function(e,n){var o,i,s,r,a;if(void 0===n)for(i=t.es(),r=0,a=i.length;a>r;r++)s=i[r],s.innerHTML+=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.append. The selector was "+t.selector),null;o=t.es()[n],o.innerHTML+=e}return this},t.css=function(e,n,o){var i,s,r,a,l,u,d,c,h;if(void 0===o){if("object"==typeof e&&void 0===n)for(s=t.es(),u=0,c=s.length;c>u;u++){l=s[u];for(r in e)a=e[r],e.hasOwnProperty(r)&&(l.style[r]=a)}for(s=t.es(),d=0,h=s.length;h>d;d++)l=s[d],l.style[e]=n}else{if(o>=t.elements().length||0>o)return console.warn("You provided an index ("+o+") that is out of range to a x.css. The selector was "+t.selector),null;i=t.es()[o],i.style[e]=n}return this},t.each=function(e,n){var o,i,s,r,a;if(void 0===n)for(i=t.es(),r=0,a=i.length;a>r;r++)s=i[r],e(s);else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.each. The selector was "+t.selector),null;o=t.es()[n],e(o)}return this},t.html=function(e,n){var o,i,s,r,a,l,u,d;if(void 0!==e&&"number"!=typeof e){if(void 0===n)for(i=t.es(),r=0,l=i.length;l>r;r++)s=i[r],s.innerHTML=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.html. The selector was "+t.selector),null;o=t.es()[n],o.innerHTML=e}return this}if(void 0===e){for(d=[],i=t.es(),a=0,u=i.length;u>a;a++)s=i[a],d.push(s.innerHTML);return d}return e>=t.elements().length||0>e?(console.warn("You provided an index ("+e+") that is out of range to a x.html. The selector was "+t.selector),null):t.es()[e].innerHTML},t.httpReq=function(e,t,n,o){var i;return i=new XMLHttpRequest,i.open("GET",e,!0),i.onload=function(){if(this.status>=200&&this.status<400){if(t)return t(this)}else if(n)return n(this)},i.onerror=function(){return o?o(this):!o&&n?n(this):void 0},i.send(),i},t.on=function(e,n,o){var i,s,r,a,l;if(s=function(t){return t.addEventListener(e,n,!1)},void 0!==o){if(o>=t.elements().length||0>o)return console.warn("You provided an index ("+o+") that is out of range to a x.on. The selector was "+t.selector),null}else for(i=t.es(),a=0,l=i.length;l>a;a++)r=i[a],s(r);return this},t.ready=function(e){return"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},t.removeAllClasses=function(e){var n,o,i,s,r;if(void 0===e)for(o=t.elements(),s=0,r=o.length;r>s;s++)i=o[s],i.className="";else{if(e>=t.elements().length||0>e)return console.warn("You provided an index ("+e+") that is out of range to a x.removeAllClasses. The selector was "+t.selector),null;n=t.elements()[e],n.className=""}return this},t.removeClass=function(e,n){var o,i,s,r,a;if(void 0===n)for(i=t.elements(),r=0,a=i.length;a>r;r++)s=i[r],s.className=s.className.split(e).join("").split("  ").join(" ").trim();else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.removeClass. The selector was "+t.selector),null;o=t.elements()[n],o.className=o.className.split(e).join("").split("  ").join(" ").trim()}return this},t.toggle=function(e){var n,o,i,s,r;if(r=function(e){return e.style.display="none"===getComputedStyle(e).display?"block":"none"},"number"==typeof e){if(e>=t.elements().length||0>e)return console.warn("You provided an index ("+e+") that is out of range to a x.toggle. The selector was "+t.selector),null;r(t.es()[e])}else for(n=t.es(),i=0,s=n.length;s>i;i++)o=n[i],r(o);return t},t.val=function(e,n){var o,i,s,r,a,l,u,d;if(void 0!==e&&"number"!=typeof e){if(void 0===n)for(i=t.es(),r=0,l=i.length;l>r;r++)s=i[r],s.value=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.val. The selector was "+t.selector),null;o=t.es()[n],o.vaule=e}return this}if(void 0===e){for(d=[],i=t.es(),a=0,u=i.length;u>a;a++)s=i[a],d.push(s.value);return d}return e>=t.elements().length||0>e?(console.warn("You provided an index ("+e+") that is out of range to a x.val. The selector was "+t.selector),null):t.es()[e].value},t},!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),u="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,d=t,l&&(e.style.overflowY=t),o()}function o(){var t=e.style.height,o=document.documentElement.scrollTop,i=document.body.scrollTop,s=e.style.height;e.style.height="auto";var r=e.scrollHeight+u;if(0===e.scrollHeight)return void(e.style.height=s);e.style.height=r+"px",document.documentElement.scrollTop=o,document.body.scrollTop=i;var a=window.getComputedStyle(e,null);if(a.height!==e.style.height){if("visible"!==d)return void n("visible")}else if("hidden"!==d)return void n("hidden");if(t!==e.style.height){var l=document.createEvent("Event");l.initEvent("autosize:resized",!0,!1),e.dispatchEvent(l)}}var i=void 0===arguments[1]?{}:arguments[1],s=i.setOverflowX,r=void 0===s?!0:s,a=i.setOverflowY,l=void 0===a?!0:a;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var u=null,d="hidden",c=function(t){window.removeEventListener("resize",o),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeAttribute("data-autosize-on"),e.removeEventListener("autosize:destroy",c),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",o),e.addEventListener("input",o),e.addEventListener("autosize:update",o),e.setAttribute("data-autosize-on",!0),l&&(e.style.overflowY="hidden"),r&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.exports=s}),!function(e,t,n){"undefined"!=typeof module?module.exports=n(e,t):"function"==typeof define&&"object"==typeof define.amd?define(n):t[e]=n(e,t)}("humane",this,function(e,t){var n=window,o=document,i={on:function(e,t,o){"addEventListener"in n?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)},off:function(e,t,o){"removeEventListener"in n?e.removeEventListener(t,o,!1):e.detachEvent("on"+t,o)},bind:function(e,t){return function(){e.apply(t,arguments)}},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},config:function(e,t){return null!=e?e:t},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var e=o.createElement("div"),t={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var n in t)n+"Transition"in e.style&&(this.vendorPrefix=t[n],this.transSupport=!0)}};i._checkTransition();var s=function(e){e||(e={}),this.queue=[],this.baseCls=e.baseCls||"humane",this.addnCls=e.addnCls||"",this.timeout="timeout"in e?e.timeout:2500,this.waitForMove=e.waitForMove||!1,this.clickToClose=e.clickToClose||!1,this.timeoutAfterMove=e.timeoutAfterMove||!1,this.container=e.container;try{this._setupEl()}catch(t){i.on(n,"load",i.bind(this._setupEl,this))}};return s.prototype={constructor:s,_setupEl:function(){var e=o.createElement("div");if(e.style.display="none",!this.container){if(!o.body)throw"document.body is null";this.container=o.body}this.container.appendChild(e),this.el=e,this.removeEvent=i.bind(function(){var e=i.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);e?setTimeout(i.bind(this.remove,this),e):this.remove()},this),this.transEvent=i.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){i.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(i.on(o.body,"mousemove",this.removeEvent),i.on(o.body,"click",this.removeEvent),i.on(o.body,"keypress",this.removeEvent),i.on(o.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var e=this.queue.shift(),t=i.config(e.clickToClose,this.clickToClose);t&&(i.on(this.el,"click",this.removeEvent),i.on(this.el,"touchstart",this.removeEvent));var n=i.config(e.timeout,this.timeout);n>0&&(this.currentTimer=setTimeout(i.bind(this._afterTimeout,this),n)),i.isArray(e.html)&&(e.html="<ul><li>"+e.html.join("<li>")+"</ul>"),this.el.innerHTML=e.html,this.currentMsg=e,this.el.className=this.baseCls,i.transSupport?(this.el.style.display="block",setTimeout(i.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(e){if(i.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*e}catch(t){}else this.el.style.opacity=String(e)},_showMsg:function(){var e=i.config(this.currentMsg.addnCls,this.addnCls);if(i.transSupport)this.el.className=this.baseCls+" "+e+" "+this.baseCls+"-animate";else{var t=0;this.el.className=this.baseCls+" "+e+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var n=this,o=setInterval(function(){1>t?(t+=.1,t>1&&(t=1),n._setOpacity(t)):clearInterval(o)},30)}},_hideMsg:function(){var e=i.config(this.currentMsg.addnCls,this.addnCls);if(i.transSupport)this.el.className=this.baseCls+" "+e,i.on(this.el,i.vendorPrefix?i.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var t=1,n=this,o=setInterval(function(){t>0?(t-=.1,0>t&&(t=0),n._setOpacity(t)):(n.el.className=n.baseCls+" "+e,clearInterval(o),n._afterAnimation())},30)},_afterAnimation:function(){i.transSupport&&i.off(this.el,i.vendorPrefix?i.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(e){var t="function"==typeof e?e:null;i.off(o.body,"mousemove",this.removeEvent),i.off(o.body,"click",this.removeEvent),i.off(o.body,"keypress",this.removeEvent),i.off(o.body,"touchstart",this.removeEvent),i.off(this.el,"click",this.removeEvent),i.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,t&&this.currentMsg&&(this.currentMsg.cb=t),this._animating?this._hideMsg():t&&t()},log:function(e,t,n,o){var i={};if(o)for(var s in o)i[s]=o[s];if("function"==typeof t)n=t;else if(t)for(var s in t)i[s]=t[s];return i.html=e,n&&(i.cb=n),this.queue.push(i),this._run(),this},spawn:function(e){var t=this;return function(n,o,i){return t.log.call(t,n,o,i,e),t}},create:function(e){return new s(e)}},new s});var appendNewRow,changedData,closeModal,config,data,dataObjToView,getDataJsonString,load,openModal,publish,setModal,viewToDataObj;console.log("karteikarten creator v0.1 - ALPHA beloved ben"),autosize(x("textarea").es()),data={config:{random:!0},data:[]},config={animationTime:500},appendNewRow=function(){var e;return e=document.createElement("tr"),e.innerHTML='<td><textarea placeholder="Vorderseite"></textarea></td><td><textarea placeholder="Rückseite"></textarea></td>',x("tbody").e().appendChild(e),x("tbody > tr").on("keypress",changedData)},changedData=function(){return console.log("changedData"),setTimeout(function(){return(""!==x("tbody > tr:last-child > td > textarea").val()[0]||""!==x("tbody > tr:last-child > td > textarea").val()[1])&&(console.log("changed last-child"),appendNewRow()),viewToDataObj()},5)},dataObjToView=function(){var e,t,n,o,i;for(x("tbody").html(""),o=data.data,t=0,n=o.length;n>t;t++)e=o[t],i=document.createElement("tr"),i.innerHTML="<td><textarea placeholder='Vorderseite'>"+e[0]+"</textarea></td><td><textarea placeholder='Rückseite'>"+e[1]+"</textarea></td>",x("tbody").e().appendChild(i);return appendNewRow()},getDataJsonString=function(){return JSON.stringify(data)},load=function(e){return data=e,dataObjToView()},publish=function(){var e,t;return e={description:"karteikarten data json obj","public":!0,files:{"data.json":{content:getDataJsonString()}}},t=new XMLHttpRequest,t.addEventListener("load",function(e){var t,n;return t=JSON.parse(e.target.responseText),n=t.files["data.json"].raw_url,console.log(t),console.log(n),closeModal(),setTimeout(function(){return setModal("published"),x(".gistUrl").val(n),openModal()},config.animationTime)}),t.addEventListener("error",function(e){return console.error(e),humane.log("There was an error publishing. Try again later.")}),t.open("POST","https://api.github.com/gists"),t.send(JSON.stringify(e))},viewToDataObj=function(){var e,t,n,o,i,s,r;for(s=x("tr").es().length-2,data.data=[],i=e=1,t=s;t>=1?t>=e:e>=t;i=t>=1?++e:--e)o=x("tr:nth-child("+i+") > td > textarea").val(),r=o[0],n=o[1],data.data.push([r,n]);return!0},setModal=function(e){return x(".modal ."+e).css("display","block"),"export"===e?x(".modal .export textarea").val(getDataJsonString()):void 0},openModal=function(){return x(".modal").addClass("swingIn"),x(".modal").css("display","block"),setTimeout(function(){return x(".modal").removeClass("swingIn")},config.animationTime)},closeModal=function(){return x(".modal").addClass("swingOut"),setTimeout(function(){return x(".modal").css("display","none"),x(".modal .export").css("display","none"),x(".modal .load").css("display","none"),x(".modal .publish").css("display","none"),x(".modal").removeClass("swingOut")},config.animationTime)},x("tbody > tr").on("keypress",changedData),x(".closeModal").on("click",closeModal),x(".exportBtn").on("click",function(){return setModal("export"),openModal()}),x(".publishBtn").on("click",function(){return setModal("publish"),openModal()}),x(".loadBtn").on("click",function(){return setModal("load"),openModal()}),x(".publishGo").on("click",publish),x(".loadGo").on("click",function(){return load(JSON.parse(x(".inputJson").val())),closeModal()});