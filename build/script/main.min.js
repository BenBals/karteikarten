var x;x=function(e){var t;return t={},t.selector=e,t.element=function(){return document.querySelector(t.selector)},t.elements=function(){return document.querySelectorAll(t.selector)},t.e=t.element,t.es=t.elements,t.addClass=function(e,n){var r,a,s,i,o;if(void 0===n)for(a=t.elements(),i=0,o=a.length;o>i;i++)s=a[i],s.className===s.className.split(e).join("")&&(""===s.className?s.className=e:s.className+=" "+e);else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.addClass. The selector was "+t.selector),null;r=t.elements()[n],""===r.className?r.className=e:r.className+=" "+e}return this},t.append=function(e,n){var r,a,s,i,o;if(void 0===n)for(a=t.es(),i=0,o=a.length;o>i;i++)s=a[i],s.innerHTML+=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.append. The selector was "+t.selector),null;r=t.es()[n],r.innerHTML+=e}return this},t.css=function(e,n,r){var a,s,i,o,l,u,c,d,h;if(void 0===r){if("object"==typeof e&&void 0===n)for(s=t.es(),console.log(s),u=0,d=s.length;d>u;u++){l=s[u],console.log(l);for(i in e)o=e[i],e.hasOwnProperty(i)&&(console.log("css: "+i+": "+o),l.style[i]=o)}for(s=t.es(),c=0,h=s.length;h>c;c++)l=s[c],l.style[e]=n}else{if(r>=t.elements().length||0>r)return console.warn("You provided an index ("+r+") that is out of range to a x.css. The selector was "+t.selector),null;a=t.es()[r],a.style[e]=n}return this},t.each=function(e,n){var r,a,s,i,o;if(void 0===n)for(a=t.es(),i=0,o=a.length;o>i;i++)s=a[i],e(s);else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.each. The selector was "+t.selector),null;r=t.es()[n],e(r)}return this},t.html=function(e,n){var r,a,s,i,o,l,u,c;if(void 0!==e&&"number"!=typeof e){if(void 0===n)for(a=t.es(),i=0,l=a.length;l>i;i++)s=a[i],s.innerHTML=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.html. The selector was "+t.selector),null;r=t.es()[n],r.innerHTML=e}return this}if(void 0===e){for(c=[],a=t.es(),o=0,u=a.length;u>o;o++)s=a[o],c.push(s.innerHTML);return c}return e>=t.elements().length||0>e?(console.warn("You provided an index ("+e+") that is out of range to a x.html. The selector was "+t.selector),null):t.es()[e].innerHTML},t.httpReq=function(e,t,n,r){var a;return a=new XMLHttpRequest,a.open("GET",e,!0),a.onload=function(){if(this.status>=200&&this.status<400){if(t)return t(this)}else if(n)return n(this)},a.onerror=function(){return r?r(this):!r&&n?n(this):void 0},a.send(),a},t.on=function(e,n,r){var a,s,i,o,l;if(s=function(t){return t.addEventListener(e,n,!1)},void 0!==r){if(r>=t.elements().length||0>r)return console.warn("You provided an index ("+r+") that is out of range to a x.on. The selector was "+t.selector),null}else for(a=t.es(),o=0,l=a.length;l>o;o++)i=a[o],s(i);return this},t.ready=function(e){return"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},t.removeAllClasses=function(e){var n,r,a,s,i;if(void 0===e)for(r=t.elements(),s=0,i=r.length;i>s;s++)a=r[s],a.className="";else{if(e>=t.elements().length||0>e)return console.warn("You provided an index ("+e+") that is out of range to a x.removeAllClasses. The selector was "+t.selector),null;n=t.elements()[e],n.className=""}return this},t.removeClass=function(e,n){var r,a,s,i,o;if(void 0===n)for(a=t.elements(),i=0,o=a.length;o>i;i++)s=a[i],s.className=s.className.split(e).join("").split("  ").join(" ").trim();else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.removeClass. The selector was "+t.selector),null;r=t.elements()[n],r.className=r.className.split(e).join("").split("  ").join(" ").trim()}return this},t.toggle=function(e){var n,r,a,s,i;if(i=function(e){return console.log(getComputedStyle(e).display),e.style.display="none"===getComputedStyle(e).display?"block":"none"},"number"==typeof e){if(e>=t.elements().length||0>e)return console.warn("You provided an index ("+e+") that is out of range to a x.toggle. The selector was "+t.selector),null;i(t.es()[e])}else for(n=t.es(),a=0,s=n.length;s>a;a++)r=n[a],i(r);return t},t.val=function(e,n){var r,a,s,i,o,l,u,c;if(void 0!==e&&"number"!=typeof e){if(void 0===n)for(a=t.es(),i=0,l=a.length;l>i;i++)s=a[i],s.value=e;else{if(n>=t.elements().length||0>n)return console.warn("You provided an index ("+n+") that is out of range to a x.val. The selector was "+t.selector),null;r=t.es()[n],r.vaule=e}return this}if(void 0===e){for(c=[],a=t.es(),o=0,u=a.length;u>o;o++)s=a[o],c.push(s.value);return c}return e>=t.elements().length||0>e?(console.warn("You provided an index ("+e+") that is out of range to a x.val. The selector was "+t.selector),null):t.es()[e].value},t},!function(e,t,n){"undefined"!=typeof module?module.exports=n(e,t):"function"==typeof define&&"object"==typeof define.amd?define(n):t[e]=n(e,t)}("humane",this,function(e,t){var n=window,r=document,a={on:function(e,t,r){"addEventListener"in n?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},off:function(e,t,r){"removeEventListener"in n?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)},bind:function(e,t){return function(){e.apply(t,arguments)}},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},config:function(e,t){return null!=e?e:t},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var e=r.createElement("div"),t={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var n in t)n+"Transition"in e.style&&(this.vendorPrefix=t[n],this.transSupport=!0)}};a._checkTransition();var s=function(e){e||(e={}),this.queue=[],this.baseCls=e.baseCls||"humane",this.addnCls=e.addnCls||"",this.timeout="timeout"in e?e.timeout:2500,this.waitForMove=e.waitForMove||!1,this.clickToClose=e.clickToClose||!1,this.timeoutAfterMove=e.timeoutAfterMove||!1,this.container=e.container;try{this._setupEl()}catch(t){a.on(n,"load",a.bind(this._setupEl,this))}};return s.prototype={constructor:s,_setupEl:function(){var e=r.createElement("div");if(e.style.display="none",!this.container){if(!r.body)throw"document.body is null";this.container=r.body}this.container.appendChild(e),this.el=e,this.removeEvent=a.bind(function(){var e=a.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);e?setTimeout(a.bind(this.remove,this),e):this.remove()},this),this.transEvent=a.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){a.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(a.on(r.body,"mousemove",this.removeEvent),a.on(r.body,"click",this.removeEvent),a.on(r.body,"keypress",this.removeEvent),a.on(r.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var e=this.queue.shift(),t=a.config(e.clickToClose,this.clickToClose);t&&(a.on(this.el,"click",this.removeEvent),a.on(this.el,"touchstart",this.removeEvent));var n=a.config(e.timeout,this.timeout);n>0&&(this.currentTimer=setTimeout(a.bind(this._afterTimeout,this),n)),a.isArray(e.html)&&(e.html="<ul><li>"+e.html.join("<li>")+"</ul>"),this.el.innerHTML=e.html,this.currentMsg=e,this.el.className=this.baseCls,a.transSupport?(this.el.style.display="block",setTimeout(a.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(e){if(a.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*e}catch(t){}else this.el.style.opacity=String(e)},_showMsg:function(){var e=a.config(this.currentMsg.addnCls,this.addnCls);if(a.transSupport)this.el.className=this.baseCls+" "+e+" "+this.baseCls+"-animate";else{var t=0;this.el.className=this.baseCls+" "+e+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var n=this,r=setInterval(function(){1>t?(t+=.1,t>1&&(t=1),n._setOpacity(t)):clearInterval(r)},30)}},_hideMsg:function(){var e=a.config(this.currentMsg.addnCls,this.addnCls);if(a.transSupport)this.el.className=this.baseCls+" "+e,a.on(this.el,a.vendorPrefix?a.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var t=1,n=this,r=setInterval(function(){t>0?(t-=.1,0>t&&(t=0),n._setOpacity(t)):(n.el.className=n.baseCls+" "+e,clearInterval(r),n._afterAnimation())},30)},_afterAnimation:function(){a.transSupport&&a.off(this.el,a.vendorPrefix?a.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(e){var t="function"==typeof e?e:null;a.off(r.body,"mousemove",this.removeEvent),a.off(r.body,"click",this.removeEvent),a.off(r.body,"keypress",this.removeEvent),a.off(r.body,"touchstart",this.removeEvent),a.off(this.el,"click",this.removeEvent),a.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,t&&this.currentMsg&&(this.currentMsg.cb=t),this._animating?this._hideMsg():t&&t()},log:function(e,t,n,r){var a={};if(r)for(var s in r)a[s]=r[s];if("function"==typeof t)n=t;else if(t)for(var s in t)a[s]=t[s];return a.html=e,n&&(a.cb=n),this.queue.push(a),this._run(),this},spawn:function(e){var t=this;return function(n,r,a){return t.log.call(t,n,r,a,e),t}},create:function(e){return new s(e)}},new s});var addQueryVar,animationTime,answer,answerRight,answerWrong,check,data,flipCard,flipElement,getQueryVar,init,loadData,nextCard,playAgainAllCards,playAgainWrongCards,playAgian,reset,setProgressBar,setState,setTextOnCard,updateProgressBar;console.log("karteikarten v0.5 - BETA ceasium chameleon"),x(".ready").ready(function(){return humane.clickToClose=!0,getQueryVar("dataURL")!==!1?loadData(getQueryVar("dataURL")):void 0}),animationTime=500,data={},data.allCards=[],data.random=!1,data.state="selectData",answer=function(){return data.lastAnsweredCard=data.unansweredCards.splice(0,1)[0]},answerRight=function(){return data.rightCards.push(data.lastAnsweredCard),nextCard()},answerWrong=function(){return data.wrongCards.push(data.lastAnsweredCard),nextCard(!0)},check=function(){return flipCard()},init=function(e){return data.unansweredCards=!!e==!1?data.allCards.slice():data.wrongCards.slice(),data.rightCards=[],data.wrongCards=[],data.currCard=0,setTextOnCard(),updateProgressBar()},loadData=function(e){var t,n,r,a,s,i,o;for(o=[],o=e?e.trim().split(","):null===x(".dataSelect").val()?x("input.jsonUrl").val().trim().split(", ").join(",").split(","):x(".dataSelect").val(),console.log("the urls are "),console.log(o),humane.log("Laden..."),s=[],a=!1,n=0,r=o.length;r>n;n++)i=o[n],i=i.split("gist.githubusercontent.com").join("cdn.rawgit.com"),"localhost"===window.location.hostname&&(i=i.split("cdn.").join("")),x().httpReq(i,function(e){return s.push(JSON.parse(e.response)),console.log(s),t()},function(){return a=!0,t()}),console.log("start loading",i);return t=function(){var e,t,n;if(a&&(humane.remove(),humane.log("Es ist ein Fehler beim Laden der Daten aufgetreten. Kontrolliere die URL(s) bzw. die Datenquelle(n).")),s.length===o.length){if(console.log("all data loaded"),console.log(s),1===s.length)s[0]instanceof Array?data.allCards=s[0]:(data.allCards=s[0].data.shuffle(),data.random=s[0].config.random);else{for(t=0,n=s.length;n>t;t++)e=s[t],console.log(e),data.allCards=data.allCards.concat(e instanceof Array?e:e.data);data.allCards.shuffle()}return humane.remove(),flipCard(),setTimeout(function(){return init(),setState("front"),x(".progressbar").css("display","block"),updateProgressBar()},animationTime/2),addQueryVar("dataURL",o.join(",")),humane.log("Kopiere einfach die URL aus der Leiste und sende sende sie an jemandem und er spielt mit den gleichen karteikarten.")}}},nextCard=function(e){return updateProgressBar(),x(".card").addClass(e?"swingOut-wrong":"swingOut-right"),setTimeout(function(){return x(".card").removeClass("swingOut-wrong"),x(".card").removeClass("swingOut-right"),x(".card").addClass("swingIn"),setTimeout(function(){return x(".card").removeClass("swingIn")},animationTime)},animationTime),data.random&&data.unansweredCards.shuffle(),flipCard(),data.currCard++,setTimeout(function(){return setTextOnCard()},animationTime/2)},playAgian=function(){return console.log("runnig playAgian"),setTimeout(function(){return setState("front")},animationTime/2)},playAgainAllCards=function(){return flipCard(),setTimeout(function(){return init()},animationTime/2)},playAgainWrongCards=function(){return flipCard(),setTimeout(function(){return init(!0)},animationTime/2)},reset=function(){return window.location.hash="",window.location.href=window.location.href.split("#")[0]},addQueryVar=function(e,t){var n;return n=window.location.hash,n.startsWith("#?")?window.location.hash+="&"+String(e)+"="+String(t):window.location.hash="?"+String(e)+"="+String(t)},flipElement=function(e){return x(e).addClass("flip"),setTimeout(function(){return x(e).removeClass("flip")},animationTime)},flipCard=function(){return"front"===data.state?data.state="back":"back"===data.state&&(data.state="front"),console.log("runnig flip card"),flipElement(".card"),setTimeout(function(){return x(".front").toggle(),x(".back").toggle()},animationTime/2)},getQueryVar=function(e){var t,n,r,a,s,i;for(a=window.location.hash.substring(2),i=a.split("&"),t=0,n=i.length;n>t;t++)if(s=i[t],r=s.split("="),r[0]===e)return r[1];return!1},setProgressBar=function(e,t){return x(".progressbar .right").css("width",e+"%"),x(".progressbar .wrong").css("width",t+"%"),x(".progressbar .wrong").css("left",e+"%")},setState=function(e){return data.state=e,x(".front").css("display","none"),x(".back").css("display","none"),x(".allDone").css("display","none"),x(".selectData").css("display","none"),x("."+e).css("display","block")},setTextOnCard=function(){return console.log("running setTextOnCard"),0===data.allCards.length?(console.log("there is no data"),setState("selectData")):data.unansweredCards.length>0?(x(".q").html(data.unansweredCards[0][0]),x(".a").html(data.unansweredCards[0][1]),setState("front")):(setState("allDone"),humane.log('Psst. Profi-Tipp: Benutze <a href="https://github.com/BenBals/karteikarten/blob/master/README.md#shortcuts">Shortcuts<a>, wenn du auf einem Computer spielst.'),0===data.wrongCards.length?x(".btnAgainWrong").css("display","none"):x(".btnAgainWrong").css("display","block"))},updateProgressBar=function(){var e,t,n;return e=data.unansweredCards.length+data.rightCards.length+data.wrongCards.length,t=data.rightCards.length/e*100,n=data.wrongCards.length/e*100,setProgressBar(t,n)},Array.prototype.shuffle=function(){var e,t,n;if(e=this.length,t=void 0,n=void 0,0===e)return this;for(;--e;)t=Math.floor(Math.random()*(e+1)),n=this[e],this[e]=this[t],this[t]=n;return this},x(".checkBtn").on("click",function(){return check()}),x(".btnRight, .btnWrong").on("click",function(){return answer()}),x(".btnRight").on("click",function(){return answerRight()}),x(".btnWrong").on("click",function(){return answerWrong()}),x(".btnAgainAll, .btnAgainWrong").on("click",function(){return playAgian()}),x(".btnAgainAll").on("click",function(){return playAgainAllCards()}),x(".btnAgainWrong").on("click",function(){return playAgainWrongCards()}),x(".btnSubmitJson").on("click",function(){return loadData()}),x(".btnReset").on("click",function(){return reset()}),x("body").on("keypress",function(e){if(console.log(e.keyCode),console.log(data.state),13===e.keyCode){if("front"===data.state)return check();if("back"===data.state)return console.log("running hk back"),answer(),answerRight();if("allDone"===data.state)return playAgian(),playAgainAllCards();if("selectData"===data.state)return loadData()}else if(32===e.keyCode){if("back"===data.state)return answer(),answerWrong();if("allDone"===data.state)return playAgian(),playAgainWrongCards()}else if(82===e.keyCode)return reset()}),function(){function e(){for(var e in n)n[e].selected=r[e]}function t(){for(var t=0;t<n.length;t++)n[t].onmousedown=function(t){var n=t.target.index;return r[n]=!r[n],e(),!1}}var n=document.getElementsByTagName("option"),r=[];t()}();