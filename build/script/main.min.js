var addQueryVar,animationTime,answer,answerRight,answerWrong,check,data,flipCard,flipElement,getQueryVar,init,loadData,nextCard,playAgainAllCards,playAgainWrongCards,playAgian,setProgressBar,setTextOnCard,updateProgressBar;console.log("karteikarten v0.2"),$(document).ready(function(){return toastr.options.preventDuplicates=!0,getQueryVar("dataURL")!==!1?loadData(getQueryVar("dataURL")):void 0}),animationTime=500,data={},data.allCards=[],data.random=!1,answer=function(){return data.lastAnsweredCard=data.unansweredCards.splice(0,1)[0]},answerRight=function(){return data.rightCards.push(data.lastAnsweredCard),nextCard()},answerWrong=function(){return data.wrongCards.push(data.lastAnsweredCard),nextCard(!0)},check=function(){return flipCard()},init=function(e){return data.unansweredCards=!!e==!1?data.allCards.slice():data.wrongCards.slice(),data.rightCards=[],data.wrongCards=[],data.currCard=0,setTextOnCard()},loadData=function(e){var n;return n="",n=e?e:""===$(".dataSelect").val()?$("input.jsonUrl").val():$(".dataSelect").val(),console.log(n),toastr.info("Laden..."),$.getJSON(n,function(e){return console.log(typeof e),e instanceof Array?data.allCards=e:(data.allCards=e.data.shuffle(),data.random=e.config.random),console.log(e),flipCard(),setTimeout(function(){return init(),$(".front").show(),$(".back").hide(),$(".allDone").hide(),$(".selectData").hide(),$(".progressbar").fadeIn("fast"),updateProgressBar()},animationTime/2)}).fail(function(){return toastr.clear(),toastr.error("Es ist ein Fehler beim Laden der Daten aufgetreten. Kontrolliere die URL bzw. die Datenquelle.")}).done(function(){return toastr.clear(),addQueryVar("dataURL",n),toastr.info("Kopiere einfach die URL aus der Leiste und sende sende sie an jemandem und er spielt mit den gleichen karteikarten.")})},nextCard=function(e){return updateProgressBar(),$(".card").addClass(e?"swingOut-wrong":"swingOut-right"),setTimeout(function(){return $(".card").removeClass("swingOut-wrong"),$(".card").removeClass("swingOut-right"),$(".card").addClass("swingIn"),setTimeout(function(){return $(".card").removeClass("swingIn")},animationTime)},animationTime),data.random&&data.unansweredCards.shuffle(),flipCard(),data.currCard++,setTimeout(function(){return setTextOnCard()},animationTime/2)},playAgian=function(){return console.log("runnig playAgian"),setTimeout(function(){return $(".allDone").hide(),$(".front").show()},animationTime/2)},playAgainAllCards=function(){return flipCard(),setTimeout(function(){return init()},animationTime/2)},playAgainWrongCards=function(){return flipCard(),setTimeout(function(){return init(!0)},animationTime/2)},addQueryVar=function(e,n){var t;return t=window.location.hash,t.startsWith("#?")?window.location.hash+="&"+String(e)+"="+String(n):window.location.hash="?"+String(e)+"="+String(n)},flipElement=function(e){return $(e).addClass("flip"),setTimeout(function(){return $(e).removeClass("flip")},animationTime)},flipCard=function(){return console.log("runnig flip card"),flipElement(".card"),setTimeout(function(){return $(".front").toggle(),$(".back").toggle()},animationTime/2)},getQueryVar=function(e){var n,t,a,r,i,o;for(r=window.location.hash.substring(2),o=r.split("&"),n=0,t=o.length;t>n;n++)if(i=o[n],a=i.split("="),a[0]===e)return a[1];return!1},setProgressBar=function(e,n,t){return $(".progressbar .unanswered").width(t+"%"),$(".progressbar .right").width(e+"%"),$(".progressbar .wrong").width(n+"%"),$(".progressbar .wrong").css("left",e+"%"),$(".progressbar .unanswered").css("left",e+n+"%")},setTextOnCard=function(){return console.log("running setTextOnCard"),0===data.allCards.length?(console.log("there is no data"),$(".front").hide(),$(".back").hide(),$(".allDone").hide(),$(".selectData").show()):data.unansweredCards.length>0?($(".q").html(data.unansweredCards[0][0]),$(".a").html(data.unansweredCards[0][1]),$(".front").show(),$(".back").hide(),$(".allDone").hide(),$(".selectData").hide()):($(".front").hide(),$(".back").hide(),$(".allDone").show(),$(".selectData").hide(),0===data.wrongCards.length?$(".btnAgainWrong").hide():$(".btnAgainWrong").show())},updateProgressBar=function(){var e,n,t;return e=data.rightCards.length/data.allCards.length*100,t=data.wrongCards.length/data.allCards.length*100,n=data.unansweredCards.length/data.allCards.length*100,setProgressBar(e,t,n)},Array.prototype.shuffle=function(){var e,n,t;if(e=this.length,n=void 0,t=void 0,0===e)return this;for(;--e;)n=Math.floor(Math.random()*(e+1)),t=this[e],this[e]=this[n],this[n]=t;return this},$(".checkBtn").click(function(){return check()}),$(".btnRight, .btnWrong").click(function(){return answer()}),$(".btnRight").click(function(){return answerRight()}),$(".btnWrong").click(function(){return answerWrong()}),$(".btnAgainAll, .btnAgainWrong").click(function(){return playAgian()}),$(".btnAgainAll").click(function(){return playAgainAllCards()}),$(".btnAgainWrong").click(function(){return playAgainWrongCards()}),$(".btnSubmitJson").click(function(){return loadData()}),$(".btnReset").click(function(){return window.location.href=window.location.href.split("#").join("")}),!function(e){e(["jquery"],function(e){return function(){function n(e,n,t){return h({type:T.error,iconClass:p().iconClasses.error,message:e,optionsOverride:t,title:n})}function t(n,t){return n||(n=p()),w=e("#"+n.containerId),w.length?w:(t&&(w=c(n)),w)}function a(e,n,t){return h({type:T.info,iconClass:p().iconClasses.info,message:e,optionsOverride:t,title:n})}function r(e){C=e}function i(e,n,t){return h({type:T.success,iconClass:p().iconClasses.success,message:e,optionsOverride:t,title:n})}function o(e,n,t){return h({type:T.warning,iconClass:p().iconClasses.warning,message:e,optionsOverride:t,title:n})}function s(e){var n=p();w||t(n),u(e,n)||l(n)}function d(n){var a=p();return w||t(a),n&&0===e(":focus",n).length?void m(n):void(w.children().length&&w.remove())}function l(n){for(var t=w.children(),a=t.length-1;a>=0;a--)u(e(t[a]),n)}function u(n,t){return n&&0===e(":focus",n).length?(n[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){m(n)}}),!0):!1}function c(n){return w=e("<div/>").attr("id",n.containerId).addClass(n.positionClass).attr("aria-live","polite").attr("role","alert"),w.appendTo(e(n.target)),w}function g(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function f(e){C&&C(e)}function h(n){function a(n){return!e(":focus",u).length||n?(clearTimeout(T.intervalId),u[s.hideMethod]({duration:s.hideDuration,easing:s.hideEasing,complete:function(){m(u),s.onHidden&&"hidden"!==b.state&&s.onHidden(),b.state="hidden",b.endTime=new Date,f(b)}})):void 0}function r(){(s.timeOut>0||s.extendedTimeOut>0)&&(l=setTimeout(a,s.extendedTimeOut),T.maxHideTime=parseFloat(s.extendedTimeOut),T.hideEta=(new Date).getTime()+T.maxHideTime)}function i(){clearTimeout(l),T.hideEta=0,u.stop(!0,!0)[s.showMethod]({duration:s.showDuration,easing:s.showEasing})}function o(){var e=(T.hideEta-(new Date).getTime())/T.maxHideTime*100;h.width(e+"%")}var s=p(),d=n.iconClass||s.iconClass;if(s.preventDuplicates){if(n.message===v)return;v=n.message}"undefined"!=typeof n.optionsOverride&&(s=e.extend(s,n.optionsOverride),d=n.optionsOverride.iconClass||d),$++,w=t(s,!0);var l=null,u=e("<div/>"),c=e("<div/>"),g=e("<div/>"),h=e("<div/>"),C=e(s.closeHtml),T={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:$,state:"visible",startTime:new Date,options:s,map:n};return n.iconClass&&u.addClass(s.toastClass).addClass(d),n.title&&(c.append(n.title).addClass(s.titleClass),u.append(c)),n.message&&(g.append(n.message).addClass(s.messageClass),u.append(g)),s.closeButton&&(C.addClass("toast-close-button").attr("role","button"),u.prepend(C)),s.progressBar&&(h.addClass("toast-progress"),u.prepend(h)),u.hide(),s.newestOnTop?w.prepend(u):w.append(u),u[s.showMethod]({duration:s.showDuration,easing:s.showEasing,complete:s.onShown}),s.timeOut>0&&(l=setTimeout(a,s.timeOut),T.maxHideTime=parseFloat(s.timeOut),T.hideEta=(new Date).getTime()+T.maxHideTime,s.progressBar&&(T.intervalId=setInterval(o,10))),u.hover(i,r),!s.onclick&&s.tapToDismiss&&u.click(a),s.closeButton&&C&&C.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),a(!0)}),s.onclick&&u.click(function(){s.onclick(),a()}),f(b),s.debug&&console&&console.log(b),u}function p(){return e.extend({},g(),b.options)}function m(e){w||(w=t()),e.is(":visible")||(e.remove(),e=null,0===w.children().length&&w.remove())}var w,C,v,$=0,T={error:"error",info:"info",success:"success",warning:"warning"},b={clear:s,remove:d,error:n,getContainer:t,info:a,options:{},subscribe:r,success:i,version:"2.1.0",warning:o};return b}()})}("function"==typeof define&&define.amd?define:function(e,n){"undefined"!=typeof module&&module.exports?module.exports=n(require("jquery")):window.toastr=n(window.jQuery)});